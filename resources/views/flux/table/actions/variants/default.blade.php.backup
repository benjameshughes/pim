@props([
    'primary' => null,       // Primary action (e.g., "Create New")
    'secondary' => [],       // Array of secondary actions
    'align' => 'right',      // left, center, right
    'gap' => 'normal',       // tight, normal, loose
    'size' => 'normal',      // sm, normal, lg
    'responsive' => true,    // Stack on mobile
])

@php
$containerClasses = collect([
    'flex items-center',
    match($align) {
        'left' => 'justify-start',
        'center' => 'justify-center', 
        'right' => 'justify-end',
        default => 'justify-end'
    },
    match($gap) {
        'tight' => 'gap-1',
        'loose' => 'gap-4',
        default => 'gap-3'
    },
    $responsive ? 'flex-col sm:flex-row' : ''
])->filter()->implode(' ');

$buttonSize = match($size) {
    'sm' => 'sm',
    'lg' => 'lg', 
    default => 'md'
};
@endphp

<div class="{{ $containerClasses }}">
    
    {{-- Primary Action --}}
    @if($primary)
        <div class="flex-shrink-0">
            @if(is_array($primary))
                <flux:button 
                    :href="$primary['href'] ?? null"
                    :icon="$primary['icon'] ?? 'plus'" 
                    :variant="$primary['variant'] ?? 'filled'"
                    :size="$buttonSize"
                    :class="$primary['class'] ?? ''"
                    @if(isset($primary['action'])) 
                        x-on:click="{{ $primary['action'] }}"
                    @endif
                >
                    {{ $primary['label'] ?? $primary['text'] ?? 'Action' }}
                </flux:button>
            @else
                {{ $primary }}
            @endif
        </div>
    @endif
    
    {{-- Secondary Actions --}}
    @if(!empty($secondary))
        <div class="flex items-center {{ $gap === 'tight' ? 'gap-1' : ($gap === 'loose' ? 'gap-4' : 'gap-2') }}">
            @foreach($secondary as $action)
                @if(is_array($action))
                    <flux:button 
                        :href="$action['href'] ?? null"
                        :icon="$action['icon'] ?? null" 
                        :variant="$action['variant'] ?? 'outline'"
                        :size="$buttonSize"
                        :class="$action['class'] ?? ''"
                        @if(isset($action['action'])) 
                            x-on:click="{{ $action['action'] }}"
                        @endif
                    >
                        {{ $action['label'] ?? $action['text'] ?? 'Action' }}
                    </flux:button>
                @else
                    {{ $action }}
                @endif
            @endforeach
        </div>
    @endif
    
    {{-- Custom Slot --}}
    @if($slot->isNotEmpty())
        <div class="flex items-center {{ $gap === 'tight' ? 'gap-1' : ($gap === 'loose' ? 'gap-4' : 'gap-2') }}">
            {{ $slot }}
        </div>
    @endif
    
</div>